//For About Us Windy Array Start
//-----------------------------------------------
var img_array = ["assets/images/employees/arijit.jpg", "assets/images/employees/kamalika.jpg", "assets/images/employees/arun.jpg", "assets/images/employees/dipanwita.jpg", "assets/images/employees/rushabh.jpg", "assets/images/employees/sunny.jpg", "assets/images/employees/ashwin.jpg", "assets/images/employees/amol.jpg", "assets/images/employees/rakesh.jpg", "assets/images/employees/nilesh.jpg", "assets/images/employees/perseus.jpg", "assets/images/employees/deepak.jpg", "assets/images/employees/swapnil.jpg"];
var name_array = ["Arijit Lahiri", "Kamalika Bhattacharya", "Arunkumar Balasubramanian", "Dipanwita Kar", "Rushabh Hathi", "Sunny Singh", "Ashwin Kumar", "Amol Bhor", "Rakesh Rengaraj", "Nilesh Panchal", "Perseus Vazifdar", "Deepak Gawas", "Swapnil Domade"];
var linkedin_array = ["http://www.linkedin.com/pub/arijit-lahiri/18/53a/30b", "http://in.linkedin.com/pub/kamalika-bhattacharya/9/507/aa7", "http://in.linkedin.com/pub/arunkumar-balasubramanian/11/650/311", "", "http://in.linkedin.com/pub/rushabh-hathi/1b/b74/279", "", "http://in.linkedin.com/pub/ashwin-kumar/83/456/572", "http://in.linkedin.com/pub/amol-bhor/3a/145/181", "http://in.linkedin.com/pub/rakesh-rengaraj/58/93/857", "http://in.linkedin.com/pub/nilesh-panchal/17/a8b/3b8", "http://in.linkedin.com/pub/perseus-vazifdar/83/456/294", "http://in.linkedin.com/pub/deepak-gawas/20/651/ba3"];
var text_array = ["Arijit is an alumnus of IIM, Calcutta with over 13 years of experience in Banking, Treasury and Strategy. <br/><br/> A founder member of Ptotem, his fertile but restless mind is both the backbone and Achilles heel of the firm. ",
    "Kamalika is an MBA from ISB, Hyderabad. She currently holds a senior position with a large-cap Investment Bank. Ptotem is essentially her brain-child. She remains a strategic partner of the firm.",
    "Arun, an MBA from NMIMS, has over 15 years of experience spanning senior positions in International Trade Finance & Consumer Banking. He is a partner at Ptotem, handling its Finance & Operations." ,
    "Dipanwita, an MBA from ISB, Hyderabad, heads the Business Development for Ptotem. Her career has involved stints with Infosys, Nokia & Religare Macquarie in development & sales.",
    "Rushabh holds a Post Graduate degree in Artificial Intelligence from the University of Edinburgh. He is Ptotem’s technology wizard & is in charge of technology initiatives for new product development.",
    "Sunny is an engineering graduate in Computer Science from the Mumbai University .Prior to joining us, he worked with Patni Computer Systems. Sunny heads the Development Team at Ptotem.",
    "Ashwin majored in Botany and also, has experience in the field of Equity Analysis. At Ptotem, Ashwin heads Product Development & Marketing.",
    "Amol is an engineering graduate in Computer Science. Amol spearheads the workflow management of the firm. He also manages the Human Resources, Coding, General Administration & Accounts.",
    "Rakesh is an engineering graduate in Electronics & Telecommunication. After a brief stint with Reliance Infocom, he has joined the team of Ptotem's software developers.",
    "Nilesh is an engineering graduate who started his career with Ptotem Learning Projects. Nilesh is a part of the firm's software developers.",
    "Perseus is a Post Graduate in commerce &holds a diploma in multimedia from ‘ArenaMultimedia’. He joined the ranks of Ptotem as a Designer & is now a Project Manager.",
    "Deepak is a media graduate with over 4 years of experience in advertising and use to work as a Sr. Account Manager before he decided to join Ptotem as a Business Development Manager.",
    "Swapnil graduated in the field of Fine Arts from Central India School of Fine Arts.Before joining Ptotem as the Lead designer, he played an instrumental role at a startup that specializes in Advertising & Design."
];
var category_list = ["Games for Learning", "Games for Assessment", "Games for Research", "Games for Engagement", "Games for Social Change"]
var catimg_array = ["assets/images/prodimg/learning.jpg", "assets/images/prodimg/assessment.jpg", "assets/images/prodimg/research.jpg", "assets/images/prodimg/engagement.jpg", "assets/images/prodimg/socialchange.jpg"]
var catlinks = ["#", "#", "#", "#", "#"]
var product_text_array = ["We specialize in creating innovative training to change behaviour and improve performance. Need a more engaging training solution? We can help.<br/> <br/><strong><a href='#' class='caseIcon caseButton'>Case Studies</a></strong>",
    "We aim to reach beyond simple multiple-choice questions and incorporate the best of video game tutorials with sound educational and psychometric techniques for assessment. <br/> <br/><strong><a href='#' class='caseIcon caseButton'>Case Studies</a></strong>",
    "Need increased engagement and better insights for your quantitative or qualitative research? We specialise in making Games for Research for online and offline studies.<br/> <br/><strong><a href='#' class='caseIcon caseButton'>Case Studies</a></strong>",
    "Simple online and mobile games give marketers a way to engage consumers through owned gaming media.We can build these for you.<br/> <br/><strong><a href='#' class='caseIcon caseButton'>Case Studies</a></strong>",
    "We create and distribute social impact games that serve as critical tools in humanitarian and awareness efforts.<br/> <br/><strong><a href='#' class='caseIcon caseButton'>Case Studies</a></strong>"
];
var caseNames = ["eBay Learning Platform", "The Chronicles Engine", "The Kurukshetra Game", "Documentor Simulation", "Ecomony Simulation", "The Callertoon Project", "The Dialogue Engine", "The WinWithET Project", "The Mindmill Project", "The Creatomes Game", "Sachin Memory Project", "HT I Love Delhi Game", "JhantuMinu BhowBhow", "The Electionia Game", "v-Shesh Platform"];
var demolinks = ["http://ebaylearningcentre.in", "#", "http://toy-kraft.com/shop/product_info.php?products_id=138", "#", "#", "#", "#", "#", "#", "http://creatomes.ptotemy.com", "http://sachin.starsports.com", "#", "#", "#", "#"]
var caseImages = ["assets/images/caseImages/ebay.jpg", "assets/images/caseImages/chronicles.jpg", "assets/images/caseImages/kurukshetra.jpg", "assets/images/caseImages/documentor.jpg", "assets/images/caseImages/ecomony.jpg", "assets/images/caseImages/callertoon.jpg", "assets/images/caseImages/dialogue.jpg", "assets/images/caseImages/winwithet.jpg", "assets/images/caseImages/mindmill.jpg", "assets/images/caseImages/creatomes.jpg", "assets/images/caseImages/smp.jpg", "assets/images/caseImages/htild.jpg", "assets/images/caseImages/jmb.jpg", "assets/images/caseImages/electionia.jpg", "assets/images/caseImages/vshesh.jpg"];
var taglines = ['An online game based learning platform for eBay India sellers',
    'Story based simulations for communication of policies and principles',
    'Replay the historical 18 day Kurukshetra war in this award winning game',
    'Simulation for business documentation practice and assessment',
    'Run a country for seven days in a race to riches in this economics simulation',
    'AI based conversation engine for assessment of salesperson readiness',
    'Negotiation Simulation Engine designed as a research tool',
    'Cross media quiz platform designed to research Economic Times readership',
    'Concept Research tool for introduction of a New Product in the market',
    'Recreate the universe. Not as we know it, but as we would dream it.',
    'A timeline app commemorating Sachin Tendulkar\'s 24 Year Career',
    'Explore your city. Visit monuments, sample the local cuisine and haggle in the bazaars',
    'An easy to play card game that educates the players on the importance of cleanliness',
    'Play the game and understand the power of every single vote',
    'A game based training platform for the physically challenged'
];
var needgap = ['Teach the Sellers on eBay.in across India the best practices of online retailing.',
    'Develop an engine to effectively communicate compliance and induction training objectives.',
    'Bring Mahabharata to the youth in a form they would find engaging.',
    'Reduce iterations on documentation, one of the most expensive processes in banking operations .',
    'Engage the players and competitively assess understanding of macroeconomics.',
    'Profile the sales team and assess their compliance to script and their creativity.',
    'Develop an engine which can be used to conduct research and training on negotiation behavior.',
    'Research the newspaper\'s sectional preferences against user demographics.',
    'Design an open-ended research project to assess the consumers\' initial reactions to a new product.',
    'Build a game that combines alchemy with a role playing game.',
    'Chronicle Sachin Tendulkar\'s long career serving heavy content to a big user base',
    'Build a non-trivia based game around exploring a city.',
    'Create awareness about the need for sanitation and cleanliness.',
    'Create awareness about the responsibility to vote.',
    'Create a learning platform for physically challenged students to improve employability.'
]
var solution = ['A game based learning platform designed to educate and improve eBay sellers\' practices. The platform allows for easy customization of the content, enabling continuous content refreshes. <br>Localization features allow for lower resistance to teaching concepts and improved understanding.',
    'Experience our story based simulations where you solve problems to progress the story. The stories can be drafted across a variety of engaging themes ranging from exotic murder mysteries to simple situational case studies.<br>The stories can be modeled in a textual format or in a  graphic novel format.',
    'Awarded the Best Indoor Game for 2011 by the Indian Toy Manufacturer\'s Association and nominated for an Innovation Award at the Nuremberg Toy Fair.<br>Basis of a Game Theory based workshop for senior executives exploring the strategic bent of the participants as individuals and in teams',
    'Deployed at Kotak Mahindra Bank to assess the sales and operations personnel\'s readiness to manage business documentation. The game requires the player to spot errors in a simulated document. <br>The simulation allows the player to gradually adjust and adapt to the various common errors that can be found in documentation.',
    'The simulation was run at ISB to assess students\' understanding of the intricacies of macroeconomic decisions. <br>Ecomony required intra team dynamics in addition to the strategy leg of every action that needed to be taken. A true game theory based simulation aimed at successfully creating a real economic action reaction scenario.',
    'Deployed at SBI Life, Callertoon is Ptotem\'s flagship sales training game.<br>The simulation is powered by an Artificial Intelligence algorithm that effectively simulates a client conversation based on varying mood states, thereby providing an ideal environment for sales skill assessment.',
    'ISB and Ptotem have collaborated to create a negotiation simulation engine for professors and trainers.<br> The engine is being used for research studies by professors as well as a training tool to teach students on the intricacies of negotiations.',
    'Developed for The Economic Times, the application uses Ptotem’s quiz engine to research readership preferences.<br>The app asked the users daily questions for which the answers could be found in the day\'s newspaper.',
    'Developed for a large FMCG player in partnership with Ipsos, the objective of the research was to capture initial reactions to a ground-breaking product innovation. <br>The research focused on indirectly assessing the acceptability and stereotyping of the product in the upper socio-economic demographic.',
    'Play this exciting and challenging puzzle game by taking on the role of The Creator. <br>Purchase the clues, put the correct elements together and produce a creation. Unlock tomes and parts of the story of the universe you are creating as you solve more puzzles.',
    'A large consumer facing app (500,000 users) built for starsports.com, the application was developed to browse through Sachin Tendulkar\'s career history over an easy to use timeline interface. <br>The application curated large content sets into easy to process information blocks for improved engagement.',
    'Hindustan Times commissioned Ptotem to create city-experience based games for supporting their Delhi and Mumbai marketing campaigns.<br>Ptotem created a novel game mechanic which was used to create the games in both board game and Facebook app formats.',
    'This card game project was designed to explain mundane the concepts of wet and dry garbage in an engaging manner. <br> The game is targeted towards urban slum children.',
    'This card game is targeted towards urban youth and aims to subliminally impress up on them that every single vote counts.',
    'A experiential learning platform developed for v-Shesh, an NGO focussing on employability of the physically challenged. <br> The platform helps train physically challenged individuals in basic subjects ranging from English Grammar and Arithmetic to in-depth courses on Banking, Retail, etc.'
];

$(function () {

    // Initialization of the Page

    var contactOpened = false;
    var homeset = true;
    var smallMenuRight = "-12%";
    var caseRight = "-3%";
    var longMenuRight = "0px";

    $('.superpanel').css({
        height: window.innerHeight + 'px'
    });
    $(window).resize(function () {
        $('.superpanel').css({
            height: window.innerHeight + 'px'
        });
        $('#catchphrase').hatchShow('catchphrase');
        if (window.innerHeight > window.innerWidth) {
            $('#menu').animate({
                bottom: '20%',
                right: longMenuRight
            });
            $('#logoportrait').animate({opacity: 0});
            $('#logoportraitSmall').animate({opacity: 1});
            $('#question').hide();
            $('.old-school').show();
        } else {
            if (!homeset) {
                $('#menu').animate({
                    bottom: '90%'
                });
            }
        }
    });

    // Start Loading Animation

    var fadeTime = 400;
    var delayTime = 800;
    var catNum, catImg, catName;
    var productSet = false;
    var productWindy, aboutUsWindy;


    hide_products_links();
    setTimeout(function(){
        hide_product_windy_links();
    }, 5000);


    $('body').css("background-image", "url('assets/images/background.jpg')").fadeIn(fadeTime);
    $('#logo').fadeIn(fadeTime);
    $('.scene').parallax().fadeIn();
    $('#catchphrase').hatchShow('catchphrase');
    $('#catchphrase').animate({
        opacity: 1,
        right: 0
    }, delayTime, function () {
        $('#sky .panel').fadeIn(fadeTime, function () {
            $("#tree .panel").fadeIn(fadeTime).animate({bottom: '-10%'}, delayTime, function () {
                $('#thinker').fadeIn(fadeTime, function () {
                    $('.cloud .panel').fadeIn(fadeTime, function () {
                        $('#blurbie').fadeIn(fadeTime);
                        $('#contact-us').fadeIn(fadeTime);
                        pulsation();
                        if (window.innerHeight > window.innerWidth) {
                            $('#question').hide();
                            $('.old-school').show();
                            $('#menu').animate({right: longMenuRight});
                        }
                        ;
                        setTimeout(function () {
                            $('#menu').animate({right: longMenuRight}, delayTime);
                        }, 3000);
                        setBindings();
                        productWindy = img_windy(catimg_array, product_text_array, category_list, "#wi-el2", "#nav-prev2", "#nav-next2", "assets/images/bookicon.png", catlinks, "caseIcon");
                        aboutUsWindy = img_windy(img_array, text_array, name_array, "#wi-el", "#nav-prev", "#nav-next", "assets/images/linked_in_icon.png", linkedin_array, "linkedinIcon");
                        $('.caseIcon').on('click', function () {
                            var $this = $(this);
                            $('#productsPage').animate({marginTop: "-" + $('#productsPage').height() + "px"}, 1000, function () {
                                if (window.innerHeight < window.innerWidth) {
                                    $('#menu').animate({
                                        right: caseRight
                                    });
                                }
                                $('#backToTop').fadeIn();

                                catNum = parseInt($this.parents("li").attr("id").split("caseIcon")[1]);
                                catImg = $this.parents("li").find('.category_image').attr('src');
                                catName = $this.parents("li").find("h4").find('a').find('span').html();
                                for (i = 0; i < 3; i++) {
                                    $('#caseNo' + i).html('<img src="' + catImg + '"/><br/>' + catName + '<br>Case ' + (i + 1));
                                    $('#caseHeader' + i).html('<h3>' + caseNames[catNum * 3 + i] + '</h3>');
                                    if (demolinks[catNum * 3 + i] != "#") {
                                        $('#showdemo' + i).attr('href', demolinks[catNum * 3 + i]);
                                    } else {
                                        $('#showdemo' + i + ' img').attr('src', "assets/images/cantshowdemo.png");
                                    }
                                    $('#caseFlipHeader' + i).html('<h4><strong>' + caseNames[catNum * 3 + i] + '</strong></h4>');
                                    $('#caseImage' + i).html('<img src="' + caseImages[catNum * 3 + i] + '"/>');
                                    $('#caseTagline' + i).html('<h4>' + taglines[catNum * 3 + i] + '</h4>');
                                    $('#caseNeed' + i).html('<strong>Mandate:</strong><p>' + needgap[catNum * 3 + i] + '</p>');
                                    $('#caseSolution' + i).html('<strong>Solution:</strong><p>' + solution[catNum * 3 + i] + '</p>');
                                }
                                $('#caseContainer').fadeIn();
                            });
                        });
                    });
                });
            });
        });
    });


    // Pulsation

    function pulsation() {
        setInterval(function () {
            $('.glower').fadeIn(1000, function () {
                $('.glower').fadeOut(1000)
            });
            $('.product-book').fadeIn(1000, function () {
                $('.product-book').fadeOut(1000)
            });
            $('#bulb').fadeIn(1000, function () {
                $('#bulb').fadeOut(1000)
            });
        }, 2000);
        var is_touch_device = ("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch;
        if (!is_touch_device) {
            $('.productsLink').popover({
                container: 'body',
                placement: 'right',
                trigger: 'hover',
                html: 'true'
            });
            $('.productsLink img').popover({
                container: 'body',
                placement: 'right',
                trigger: 'hover',
                html: 'true'
            });
        }
    }

    // Set Bindings

    function showAboutUs() {
        resetCases();
        if (window.innerHeight < window.innerWidth) {
            $('#menu').animate({
                bottom: '90%',
                right: smallMenuRight
            });
        } else {
            $('#logoportrait').animate({opacity: 0});
            $('#logoportraitSmall').animate({opacity: 1});
        }
        $('#home').show();
        $('#products-menu').show();
        $('#home-page').fadeOut(100, function () {
            $('.windy>nav').css('z-index', '9999');
            $('#productsPage').css('pointer-events', 'none').animate({'opacity': '0', marginTop: "10%"}, 100, function () {
                $('#hiddenPage').css('pointer-events', 'none').animate({opacity: '0'}, 100, function () {
                    $('#aboutUs').css('pointer-events', 'auto').animate({'opacity': '1'}, 500);
                    homeset = false;
                });
            });
        });
        productSet = false;
        hide_product_windy_case_button();
    }

    function showProducts(id) {
        if (window.innerHeight < window.innerWidth) {
            $('#menu').animate({
                bottom: '90%',
                right: smallMenuRight
            });
        } else {
            $('#logoportrait').animate({opacity: 0});
            $('#logoportraitSmall').animate({opacity: 1});
        }
        $('#home').show();
        $('#about-us-menu').show();
        $('#home-page').fadeOut(100, function () {
            $('.windy>nav').css('z-index', '9999');
            productWindy.navigate(id);
            resetCases();
            $('#aboutUs').css('pointer-events', 'none').animate({'opacity': '0'}, 100, function () {
                $('#hiddenPage').css('pointer-events', 'none').animate({opacity: '0'}, 100, function () {
                    $('#productsPage').css('pointer-events', 'auto').animate({'opacity': '1', marginTop: "10%"}, 500);
                    homeset = false;
                });
            });
            productSet = true;
        });
        show_products_links();
        show_product_windy_links();
        show_product_windy_case_button();
    }

    function hide_products_links(){
        $("#serious_game_pdf").hide();
    }

    function show_products_links(){
        $("#serious_game_pdf").show();
    }

    function hide_product_windy_links(){
        $("#productsPage").find("#product-windy").find('.windy').find('.wi-container').children().first().children().first().next().hide();
    }

    function show_product_windy_links(){
        $("#productsPage").find("#product-windy").find('.windy').find('.wi-container').children().first().children().first().next().show();
    }

    function hide_product_windy_case_button(){
        $("#productsPage").find("#product-windy").find('.windy').find('.wi-container').children().first().children().first().next().next().find('.caseButton').hide();
    }

    function show_product_windy_case_button(){
        $("#productsPage").find("#product-windy").find('.windy').find('.wi-container').children().first().children().first().next().next().find('.caseButton').show();
    }

    function resetCases() {
        $('#backToTop').fadeOut();
        $('#caseContainer').fadeOut();
        $('.caseContent').slideUp();
        $('.caseCard').slideDown();
    }

    function setBindings() {

        $('body').click(function () {
            if (contactOpened) {
                $('#contact-us').animate({
                    bottom: "-220px"
                }, 1000, function () {
                    contactOpened = false;
                    $('#menu').animate({'opacity': 1});
                });
            }
        });

        $('#question').on('click', function () {
            $(this).fadeOut(500, function () {
                $('.old-school').fadeIn(500);
            });
        });

        $('#contact-us').click(function () {
            if (contactOpened) {
                $('#contact-us').animate({
                    bottom: "-220px"
                }, 1000, function () {
                    contactOpened = false;
                    $('#menu').animate({'opacity': 1});
                });
            } else {
                $('#menu').animate({'opacity': 0});
                $('#contact-us').animate({
                    bottom: "-10px"
                }, 1000, function () {
                    contactOpened = true;
                });
            }
        });

        $('#home').on('click', function () {
            $(this).hide();
            resetCases();
            $('#about-us-menu').show();
            $('#products-menu').show();
            $('#productsPage').css('pointer-events', 'none').animate({'opacity': '0', marginTop: "10%"}, 100);
            $('#aboutUs').animate({'opacity': '0'}, 100, function () {
                $('#hiddenPage').animate({opacity: '0'}, 100, function () {
                    $('#home-page').fadeIn();
                    homeset = true;
                    productSet = false;
                });
            });
            if (window.innerHeight < window.innerWidth) {
                $('#menu').animate({
                    bottom: '20%',
                    right: longMenuRight
                });
            }
        });

        $('#about-us-menu').on('click', function () {
            $(this).hide();
            showAboutUs();
        });
        $('#thinker').on('click', function () {
            $('#question').hide();
            $('.old-school').css('opacity', '0').fadeIn(100, function () {
                $('#about-us-menu').hide();
                setTimeout(function () {
                    $('.old-school').animate({'opacity': '1'}, 500);
                }, 500);
            });
            showAboutUs();
        });

        $('#products-menu').on('click', function () {
            $(this).hide();
            showProducts(0);
        });
        $('.showProduct').on('click', function () {
            var bookid = $(this).attr("id").split("treebook")[1] - 1;
            if (productSet) {
                $('#productsPage').animate({marginTop: "10%"}, function () {
                    resetCases();
                    $('#menu').animate({
                        bottom: '90%',
                        right: smallMenuRight
                    });
                    productWindy.navigate(bookid);
                });
            } else {
                $('#question').hide();
                $('#products-menu').hide();
                $('.old-school').css('opacity', '0').fadeIn(100, function () {
                    $('#products-menu').hide();
                    setTimeout(function () {
                        $('.old-school').animate({'opacity': '1'}, 500);
                        if (window.innerHeight < window.innerWidth) {
                            $('#menu').animate({
                                bottom: '90%',
                                right: smallMenuRight
                            });
                        }
                    }, 500);
                });
                showProducts(bookid);
            }
            homeset = false;
        });

        $('#apple').on('click', function () {
            resetCases();
            $('#question').hide();
            $('#home').show();
            $('.old-school').fadeIn();
            if (window.innerHeight < window.innerWidth) {
                $('#menu').animate({
                    bottom: '90%',
                    right: longMenuRight
                });
            }
            $('#home-page').fadeOut(100, function () {
                $('#aboutUs').css('pointer-events', 'none').animate({'opacity': '0'}, 100, function () {
                    $('#productsPage').css('pointer-events', 'none').animate({'opacity': '0', marginTop: "10%"}, 100, function () {
                        $('#hiddenPage').css('pointer-events', 'auto').animate({opacity: '1'});
                    });
                });
                productSet = false;
            });
            homeset = false;
        });


        $('#backToTop').on('click', function () {
            $('#productsPage').animate({marginTop: "10%"}, 1000);
            resetCases();
            if (window.innerHeight < window.innerWidth) {
                $('#menu').animate({
                    right: smallMenuRight
                });
            }
        });

        $('.showmore').on('click', function () {
            var $card = $(this).parents('.caseCard');
            $card.slideUp();
            $card.next().slideDown();
        });


    }
});

jQuery.fn.hatchShow = function (id) {
    $('#' + id + ' .hsjs').css('display', 'inner-block').css('white-space', 'pre').each(
        function () {
            var t = $(this);
            t.wrap("<span class='hatchshow_temp' style='display:block'>");
            var pw = t.parent().width();
            while (t.width() < pw && t.fontSize() < 500) {
                t.css('font-size', (t.fontSize() + 1) + "px"),
                    function () {
                        while (t.width() > pw) {
                            t.css('font-size', (t.fontSize() - .1) + "px")
                        }
                    };
            }
        }).css('visibility', 'visible');
};
jQuery.fn.fontSize = function () {
    return parseInt($(this).css('font-size').replace('px', ''));
};

//------------------------------------------------

//this is the function to create windys. The arguments explanation;
//img_array-> array of images that the windy should contain. This array should contain the list of filenames(paths),
//text_array-> the text associated with images.
//name_array-> The title associated with each image
//div_id-> the id of DOM element that would be converted to windy.
//nav_prev->id of prev arrow
//nav_next->id of next arrow.
//note: all ids are passed with #

function img_windy(img_array, text_array, name_array, div_id, nav_prev, nav_next, thumb_image, thumb_links, thumb_class) {
    var seplen = img_array.length;   //images array
    var carus = $(div_id);        //will append images to this element
    var imglist = '';                    //we use this variable for optimization..
    var counter = 0;
    for (var i = 0; i < seplen; i++) {
        imglist += '<li id="' + thumb_class + i + '"><img src="' + img_array[i] + '" alt="image' + [i + 1] + '" class="category_image"/><h4><a href="' + thumb_links[i] + '" class="' + thumb_class + '"><img src="' + thumb_image + '" class="thumb-connect"/><span>' + name_array[i] + '</span></a></h4><p>' + text_array[i] + '</p><br></li>';    //add all images what we have (actually there 2 or 3 images)
    }
    carus.html(imglist);
    var $el = $(div_id),
        windy = $el.windy(),
        allownavnext = false,
        allownavprev = false;
    $(nav_prev).on('mousedown',
        function (event) {
            allownavprev = true;
            navprev();
        }).on('mouseup mouseleave', function (event) {
            allownavprev = false;
        });
    $(nav_next).on('mousedown',
        function (event) {

            allownavnext = true;
            navnext();

        }).on('mouseup mouseleave', function (event) {

            allownavnext = false;

        });

    function navnext() {
        if (allownavnext) {
            windy.next();
            setTimeout(function () {
                navnext();
            }, 150);
        }
    }

    function navprev() {
        if (allownavprev) {
            windy.prev();
            setTimeout(function () {
                navprev();
            }, 150);
        }
    }

    return windy;
}
